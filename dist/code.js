!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=24)}({24:function(e,t,n){"use strict";n.r(t);var r=e=>{for(var t,n=e.length;0!=n;)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e},o=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function l(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((r=r.apply(e,t||[])).next())}))};let a=260,i=320;figma.showUI(__html__,{width:a,height:i});const l=()=>{const e=(e=>e.filter(e=>{var t;return"COMPONENT_SET"===(null===(t=e.masterComponent)||void 0===t?void 0:t.parent.type)}))(figma.currentPage.selection),t=[],n=e.reduce((e,t)=>(e[t.masterComponent.parent.id]=e[t.masterComponent.parent.id]||[],e[t.masterComponent.parent.id].push(t),e),{});[...new Set(e.map(e=>e.masterComponent.parent))].forEach(e=>{t.push({component:{name:e.name,id:e.id},variants:e.children[0].name.split(", ").map(e=>e.substr(0,e.indexOf("="))),selectedVariants:[],children:e.children.map(e=>({name:e.name,variants:e.name.split(", "),id:e.id}))})}),figma.ui.postMessage({type:"variants",data:t}),figma.ui.onmessage=e=>o(void 0,void 0,void 0,(function*(){if("what-to-random"===e.type){let t=e.data;Object.values(n).forEach(n=>{let o=null;n.forEach((n,a)=>{let i=n.mainComponent.name.split(", ");t.map(t=>{if(t.component.id===n.masterComponent.parent.id){let l=i.map(e=>t.selectedVariants.map(t=>{if(e.includes(t))return e})).flat().filter(Boolean);!o&&(o=r(n.masterComponent.parent.children.filter(e=>{if(e.name.split(", ").filter(e=>l.includes(e)).length===l.length)return e})));let u=o[Math.floor(Math.random()*o.length)];e.isNoRepeat?o.length>a&&n.swapComponent(o[a]):n.swapComponent(u)}})})})}"resize"===e.type&&figma.ui.resize(a,e.size)}))};l(),figma.on("selectionchange",()=>{l()})}});